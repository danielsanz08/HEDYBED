{% load static %}
<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>{% block titulo %}L√°cteos Hedybed{% endblock %}</title>
  <!-- Favicon -->
  <link rel="icon" href="{% static 'imagen/logoFooter.png' %}" type="image/x-icon">
  <!-- CSS de Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />

  <!-- CSS de √≠conos -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- CSS personalizado base -->
  <link href="{% static 'css/navbar.css' %}?v={% now " U" %}" rel="stylesheet" />
</head>
<style>
  /* Estilos para el header en modo oscuro */
  body.dark-mode #main-header {
    background-color: #037a58;
    /* Un tono m√°s oscuro que el negro puro */
    color: white;
    /* Un tono de blanco m√°s suave para el texto */
    box-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
    /* Sombra m√°s suave en modo oscuro */
  }

  body.dark-mode .navbar {
    background-color: #037a58;
    /* Un tono m√°s oscuro que el negro puro */
    color: white;
    /* Un tono de blanco m√°s suave para el texto */
    box-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
    /* Sombra m√°s suave en modo oscuro */
  }

  body.dark-mode {
    background-color: black;
  }

  /* Modo monocromo aplicado solo a elementos de contenido */
  body.monochrome-mode *:not(#accessibility-menu) {
    filter: grayscale(100%);
    transition: filter 0.3s ease;
  }

  /* Estilos para resaltar t√≠tulos */
  body.highlight-titles h1,
  body.highlight-titles h2,
  body.highlight-titles h3,
  body.highlight-titles h4,
  body.highlight-titles h5,
  body.highlight-titles h6,
  body.highlight-titles b {
    background-color: yellow;
    padding: 2px 5px;
    display: inline-block;
  }

  /* Opci√≥n de resaltar enlaces */
  .highlight-links-button {
    display: flex;
    align-items: center;
    background: #005b96;
    /* Color de fondo para el bot√≥n */
    color: #ffffff;
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    width: 100%;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    transition: background-color 0.3s, box-shadow 0.3s;
    margin-top: 10px;
  }

  /* Efecto de hover para el bot√≥n de resaltar enlaces */
  .highlight-links-button:hover {
    background: #0077b6;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
  }

  /* Estilo para los enlaces resaltados */
  .highlighted-link {
    background-color: yellow;
    /* Fondo resaltado */
    color: #000;
    /* Color del texto */
    padding: 2px 4px;
    border-radius: 3px;
    text-decoration: none;
    /* Sin subrayado */
    font-weight: bold;
  }

  /* Estilo para el bot√≥n de fuente legible */
  .readable-font-button {
    display: flex;
    align-items: center;
    background: #679B9B;
    /* Color de fondo similar al tema */
    color: #ffffff;
    /* Color de texto */
    border: none;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    width: 100%;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    transition: background-color 0.3s, box-shadow 0.3s;
  }

  .readable-font-button .theme-icon {
    margin-right: 8px;
    font-size: 1.2em;
  }

  .readable-font-button:hover {
    background: #4a6d6d;
    /* Color de hover */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
  }

  /* Estilo para la fuente legible */
  body.readable-font {
    font-family: 'Arial', sans-serif;
    /* Usa una fuente legible como Arial */
    line-height: 1.6;
    /* Aumenta el espaciado entre l√≠neas para mejorar la legibilidad */
    font-size: 20px;
    /* Aumenta ligeramente el tama√±o de la fuente */
  }
  .prof {
    position: fixed;
    top: 50%;
    right: -200px;
    transform: translateY(-50%);
    background-color: #222;
    padding: 1rem;
    border-radius: 10px 0 0 10px;
    transition: right 0.3s ease-in-out;
    width: 200px;
    z-index: 1000; /* Asegura que el men√∫ est√© sobre otros elementos */
}

.prof:hover {
    right: 0;
}

.prof::before {
    content: 'üë§';
    position: absolute;
    left: -30px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 24px;
    background-color: #222;
    padding: 0.5rem;
    border-radius: 50% 0 0 50%;
    cursor: pointer;
}

.profile-photo {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    margin: 0 auto 1rem;
    display: block;
    object-fit: cover;
    border: 3px solid #00ffff;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
}

.prof a {
    display: block;
    color: white;
    text-decoration: none;
    padding: 0.5rem;
    transition: transform 0.2s ease-in-out;
}

.prof a:hover {
    transform: translateX(5px);
}
</style>

<body id="body">

  <!-- Header -->
  <header id="main-header">
    <div class="header-content">
      <b>L√°cteos Hedybed</b>
      <div class="nombre">
        <img src="{% static 'imagen/logo.png' %}" alt="Logo Hedybed" id="logo">
      </div>
    </div>
    <!--breadcrumbs-->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        {% if breadcrumb.url %}
        <li class="breadcrumb-item"><a href="{{ breadcrumb.url }}">{{ breadcrumb.name }}</a></li>
        {% else %}
        <li class="breadcrumb-item active" aria-current="page">{{ breadcrumb.name }}</li>
        {% endif %}
        {% endfor %}
      </ol>
    </nav>
    <div class="header-icons">
      {% if user.is_authenticated %}
      <span class="name">Usuario: {{ user_name }}</span>
      {% else %}
      <span class="name">Usuario: Invitado</span>
      {% endif %}
    </div>
  </header>

  <!--Perfil-->
  <div class="prof">
    {% if user.is_authenticated %}
    <img src="{{ user_profile_picture }}" alt="Foto de perfil" title="{{ user_name }}" class="profile-photo" width="50"
      height="50">
    <div class="user-menu">
      <a href="{% url 'logout_view' %}" class="logout">Cerrar sesi√≥n</a>
      <a href="#perfil">Ver Perfil</a>
    </div>
    {% else %}
    <img src="https://via.placeholder.com/150" alt="Foto de perfil" class="rounded-circle" width="50" height="50">
    <div class="user-menu">
      <a href="{% url 'logout_view' %}" class="logout">Cerrar sesi√≥n</a>
      <a href="#perfil">Ver Perfil</a>
    </div>
    {% endif %}
    
    
</div>
  

  <!-- Barra de navegaci√≥n -->
  <nav class="navbar">
    <ul class="navbar__menu">
      <li class="navbar__item">
        <a href="{% url 'inicio' %}" class="navbar__link"><i data-feather="home"></i><span>Inicio</span></a>
      </li>
      <li class="navbar__item">
        <a href="{% url 'contabilidad' %}" class="navbar__link"><i
            data-feather="dollar-sign"></i><span>Contabilidad</span></a>
      </li>
      <li class="navbar__item">
        <a href="{% url 'usuario' %}" class="navbar__link"><i data-feather="users"></i><span>Usuarios</span></a>
      </li>
      <li class="navbar__item">
        <a href="{% url 'insumos' %}" class="navbar__link"><i data-feather="coffee"></i><span>Insumos</span></a>
      </li>
      <li class="navbar__item">
        <a href="{% url 'backup' %}" class="navbar__link"><i data-feather="cloud"></i><span>Copia de
            seguridad</span></a>
      </li>
      <li class="navbar__item">
        <a href="manual/Manual de ususario.pdf" class="navbar__link"><i data-feather="help-circle"></i><span>Manual de
            usuario</span></a>
      </li>
    </ul>
  </nav>

  <!-- Contenido de la p√°gina -->
  <main>
    {% block contenido %}
    <!-- Contenido espec√≠fico de cada p√°gina aqu√≠ -->
    {% endblock %}
  </main>

  <!-- Circulo blanco para accesibilidad -->
  <div class="acc_icon" id="acc-icon" title="accesibilidad">
    <i data-feather="settings"></i>
  </div>

  <!-- Men√∫ para la accesibilidad -->
  <div class="accesibilidad" id="accesibilidad" title="accesibilidad">
    <div id="zoom-controls" class="menu-option">
      <button class="zoom-button" id="zoom-in">+</button>
      <button class="zoom-button" id="zoom-out">-</button>
      <button class="zoom-reset" id="zoom-reset">‚ü≥</button>
      <span id="zoom-percentage">100%</span>
    </div>
    <div class="menu-option">
      <button id="dark-mode-button" class="theme-button">
        <span class="theme-icon">üåô</span> Modo Oscuro
      </button>
    </div>
    <div class="menu-option">
      <button id="monochrome-mode-button" class="theme-button">
        <span class="theme-icon">üåë</span>Modo Monocromo
      </button>
    </div>
    <div class="menu-option">
      <button class="highlight-titles-button">
        <span class="theme-icon">üîÜ</span> Resaltar T√≠tulos
      </button>
    </div>

    <div class="menu-option">
      <button id="highlight-links-button" class="highlight-links-button">
        <span class="theme-icon">üîó</span> Resaltar Enlaces
      </button>
    </div>
    <div class="menu-option">
      <button id="readable-font-button" class="readable-font-button">
        <span class="theme-icon">üî§</span> Fuente Legible
      </button>
    </div>
  </div>

  {% block footer %}
  <footer>
    <img src="{% static 'imagen/logoFooter.png' %}" alt="Logo Hedybed" class="logoFooter">
    <p>&copy; 2024 hedybed. Todos los derechos reservados.</p>
  </footer>
  {% endblock %}

  <!-- Scripts de Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz4fnFO9InLY0aPp6IRLz0zKZX0z5F02z4PAq0IIO4IYYgKp3kkbScw9i" crossorigin="anonymous"
    defer></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-x5dB2aFhFzQK2qLlD4eij0qQOkeGpNSn5VZ8Kj5z/36pLJfC37/4y7C3WQ1ks6Nf" crossorigin="anonymous"
    defer></script>

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      feather.replace();
    });
  </script>

  <!-- Scripts personalizados -->
  <script src="{% static 'js/navbar.js' %}?v1.1"></script>

  <!-- Script para modo oscuro -->
  <script>
    const darkModeButton = document.getElementById('dark-mode-button');

    // Aplicar el tema oscuro basado en el estado almacenado
    const isDarkModeEnabled = localStorage.getItem('dark-mode') === 'true';
    if (isDarkModeEnabled) {
      document.body.classList.add('dark-mode');
    }

    // Alternar el tema oscuro y guardarlo en el almacenamiento local
    darkModeButton.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isDarkMode = document.body.classList.contains('dark-mode');
      localStorage.setItem('dark-mode', isDarkMode);
    });
    // Aplicar el modo monocromo basado en el estado almacenado
    const isMonochromeModeEnabled = localStorage.getItem('monochrome-mode') === 'true';
    if (isMonochromeModeEnabled) {
      document.body.classList.add('monochrome-mode');
    }

    // Alternar el modo monocromo y guardarlo en el almacenamiento local
    const monochromeButton = document.getElementById('monochrome-mode-button');

    monochromeButton.addEventListener('click', () => {
      const isMonochromeModeEnabled = document.body.classList.toggle('monochrome-mode');
      localStorage.setItem('monochrome-mode', isMonochromeModeEnabled);
    });
    // Funci√≥n para resaltar t√≠tulos
    window.toggleHighlightTitles = function () {
      document.body.classList.toggle('highlight-titles');
      // Guardar la preferencia en localStorage
      const isHighlightActive = document.body.classList.contains('highlight-titles');
      localStorage.setItem('highlightTitles', isHighlightActive);
    };

    document.addEventListener('DOMContentLoaded', function () {
      const highlightTitlesButton = document.querySelector('.highlight-titles-button');

      // Funci√≥n para alternar el resaltado de t√≠tulos
      function toggleHighlightTitles() {
        document.body.classList.toggle('highlight-titles');
        const isHighlightActive = document.body.classList.contains('highlight-titles');
        localStorage.setItem('highlightTitles', isHighlightActive);

        // Actualizar el texto del bot√≥n
        highlightTitlesButton.textContent = isHighlightActive ? 'Desactivar Resaltado' : 'Resaltar T√≠tulos';
      }

      // Asignar la funci√≥n al bot√≥n
      highlightTitlesButton.addEventListener('click', toggleHighlightTitles);

      // Aplicar la preferencia guardada al cargar la p√°gina
      const savedHighlightPreference = localStorage.getItem('highlightTitles') === 'true';
      if (savedHighlightPreference) {
        document.body.classList.add('highlight-titles');
        highlightTitlesButton.textContent = 'Desactivar Resaltado';
      }
    });
    document.addEventListener('DOMContentLoaded', function() {
    const zoomInBtn = document.getElementById('zoom-in');
    const zoomOutBtn = document.getElementById('zoom-out');
    const zoomResetBtn = document.getElementById('zoom-reset');
    const zoomPercentageDisplay = document.getElementById('zoom-percentage');
    
    // Seleccionar todos los elementos de texto relevantes
    const textElements = document.querySelectorAll('body, p, h1, h2, h3, h4, h5, h6, span, a, li, td, th');
    
    // Obtener el nivel de zoom guardado o usar 100 como valor predeterminado
    let currentZoom = parseInt(localStorage.getItem('zoomLevel')) || 100;

    // Funci√≥n para aplicar el zoom a los elementos de texto
    function applyZoom(zoomLevel) {
        textElements.forEach(el => {
            if (!el.hasAttribute('data-original-size')) {
                el.setAttribute('data-original-size', window.getComputedStyle(el).fontSize);
            }
            const originalSize = parseFloat(el.getAttribute('data-original-size'));
            el.style.fontSize = `${(zoomLevel / 100) * originalSize}px`;
        });
        zoomPercentageDisplay.textContent = `${zoomLevel}%`;
    }

    // Funci√≥n para cambiar el zoom
    function changeZoom(amount) {
        currentZoom += amount;
        currentZoom = Math.max(50, Math.min(150, currentZoom)); // Limitar entre 50% y 150%
        applyZoom(currentZoom);
        localStorage.setItem('zoomLevel', currentZoom);
    }

    // Funci√≥n para resetear el zoom
    function resetZoom() {
        currentZoom = 100;
        applyZoom(currentZoom);
        localStorage.setItem('zoomLevel', currentZoom);
    }

    // Event Listeners para los botones de zoom
    zoomInBtn.addEventListener('click', () => changeZoom(10));
    zoomOutBtn.addEventListener('click', () => changeZoom(-10));
    zoomResetBtn.addEventListener('click', resetZoom);

    // Aplicar el zoom inicial
    applyZoom(currentZoom);
});
  </script>
</body>

</html>